<app-modal [isOpen]="isOpen" [title]="!this.paciente ? 'Crear Paciente' : 'Editar Paciente'"
    (closeModal)="onModalClose()">
    <form [formGroup]="pacienteForm">
        <div class="form-field">
            <label class="form-label">Nombre</label>
            <input type="text" formControlName="nombre" id="nombre" class="form-input" placeholder="Nombre" />
            <div *ngIf="pacienteForm.get('nombre')?.invalid && pacienteForm.get('nombre')?.touched"
                class="error-message">
                El nombre es requerido
            </div>
        </div>

        <div class="form-field">
            <label class="form-label">RUT</label>
            <input type="text" formControlName="rut" id="rut" class="form-input" placeholder="12345678-9" />
            <div *ngIf="pacienteForm.get('rut')?.invalid && pacienteForm.get('rut')?.touched" class="error-message">
                El RUT es requerido
            </div>
        </div>

        <div class="form-field">
            <label class="form-label">Apellido Paterno</label>
            <input type="text" formControlName="apellido_paterno" id="apellido_paterno" class="form-input"
                placeholder="Apellido Paterno" />
            <div *ngIf="pacienteForm.get('apellido_paterno')?.invalid && pacienteForm.get('apellido_paterno')?.touched"
                class="error-message">
                El apellido paterno es requerido
            </div>
        </div>

        <div class="form-field">
            <label class="form-label">Apellido Materno</label>
            <input type="text" formControlName="apellido_materno" id="apellido_materno" class="form-input"
                placeholder="Apellido Materno" />
            <div *ngIf="pacienteForm.get('apellido_materno')?.invalid && pacienteForm.get('apellido_materno')?.touched"
                class="error-message">
                El apellido materno es requerido
            </div>
        </div>

        <div class="form-row">
            <div class="form-field form-field-half">
                <label class="form-label">Fecha de Nacimiento</label>
                <input type="date" formControlName="fecha_nacimiento" id="fecha_nacimiento" class="form-input" />
                <div *ngIf="pacienteForm.get('fecha_nacimiento')?.invalid && pacienteForm.get('fecha_nacimiento')?.touched"
                    class="error-message">
                    La fecha de nacimiento es requerida
                </div>
            </div>

            <div class="form-field form-field-half">
                <label class="form-label">Género</label>
                <select formControlName="genero" id="genero" class="form-select">
                    <option value="">Seleccione género</option>
                    <option *ngFor="let g of pacientesDataService.getGeneros()" [value]="g.value">{{ g.label }}</option>
                </select>
                <div *ngIf="pacienteForm.get('genero')?.invalid && pacienteForm.get('genero')?.touched"
                    class="error-message">
                    El género es requerido
                </div>
            </div>
        </div>

        <div class="form-field">
            <label class="form-label">Teléfono</label>
            <input type="tel" formControlName="telefono" id="telefono" class="form-input" placeholder="Teléfono" />
            <div *ngIf="pacienteForm.get('telefono')?.invalid && pacienteForm.get('telefono')?.touched"
                class="error-message">
                El teléfono es requerido
            </div>
        </div>

        <div class="form-field">
            <label class="form-label">Dirección</label>
            <input type="text" formControlName="direccion" id="direccion" class="form-input" placeholder="Dirección" />
            <div *ngIf="pacienteForm.get('direccion')?.invalid && pacienteForm.get('direccion')?.touched"
                class="error-message">
                La dirección es requerida
            </div>
        </div>
    </form>

    <div slot="footer" class="button-group">
        <button (click)="onModalClose()" class="btn-secondary">
            Cancelar
        </button>
        <button (click)="onSubmit()" [disabled]="!pacienteForm.valid" class="btn-primary">
            Guardar Datos
        </button>
    </div>
</app-modal>